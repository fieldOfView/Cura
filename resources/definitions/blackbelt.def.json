{
    "id": "blackbelt",
    "version": 2,
    "name": "BLACKBELT 3D Printer",
    "inherits": "fdmprinter",
    "metadata": {
        "visible": true,
        "author": "fieldOfView",
        "manufacturer": "BlackBelt 3D B.V.",
        "category": "BLACKBELT 3D",
        "platform": "blackbelt_platform.stl",
        "platform_offset": [0, -2, 0],
        "limit_buildvolume":
        {
            "depth":
            {
                "maximum": 320
            }
        },
        "has_machine_materials": true,
        "has_variants": true,
        "preferred_variant": "*45_0.4*",
        "preferred_quality": "*Normal*",
        "preferred_material": "*ngen*",
        "variants_id_pattern": "{definition_id}_{term}_{term}",
        "variants_name": "Configuration",
        "variants_terms":
        [
            {
                "name": "Gantry Angle",
                "values": {
                    "15": "15°",
                    "25": "25°",
                    "35": "35°",
                    "45": "45°"
                }
            },
            {
                "name": "Nozzle Size",
                "values": {
                    "0.4": "0.4 mm",
                    "0.6": "0.6 mm",
                    "0.8": "0.8 mm"
                }
            }
        ],
        "file_formats": "text/x-gcode"
    },

    "settings": {
        "blackbelt_settings": {
            "label": "BlackBelt",
            "type": "category",
            "description": "BlackBelt specific settings",
            "icon": "category_machine",
            "children":
            {
                "blackbelt_gantry_angle":
                {
                    "label": "Gantry Angle",
                    "description": "The angle of the gantry relative to the build plate. Match this setting with the current printer configuration.",
                    "unit": "°",
                    "type": "enum",
                    "options":
                    {
                        "15": "15°",
                        "25": "25°",
                        "35": "35°",
                        "45": "45°"
                    },
                    "default_value": "45",
                    "settable_per_mesh": false,
                    "settable_per_extruder": false
                }
            }
        }
    },

    "overrides": {
        "machine_name": {
            "default_value": "BLACKBELT 3D Printer"
        },
        "machine_start_gcode" : {
            "default_value": "G90      ; Set to Absolute Positioning\nM82      ; Set extruder to absolute mode\nG21      ; metric values\nM107     ; start with the fan off\nG92 X0 Y0.2 Z0 E0 ; Set all axis to 0. Set Y offset to the belt (Y0.1 = big gap, Y0.3 = small gap)\nG1 Y1    ; Move print head up 1mm\nG28 X0 F2000      ; Home X axis\nG1 E15   ; Extruder 15mm material (purge nozzle)\nG1 Z20 E30 F500   ; Move belt and keep extruding\nG1 Z30 E20        ; Stop extruding, move the belt a bit further\nG92 Z0 E-14       ; Zero Belt and Extuder\nG1 F1000          ; Move to the next point with a Speed of 1000mm per minute\nM117 BLACKBELT Printing...\n\n˅˅˅˅˅˅˅˅˅˅˅˅˅˅˅˅ - copy from here / paste codes just under here - ˅˅˅˅˅˅˅˅˅˅˅˅˅˅˅˅\n\nM107 ;start with the fan off"
        },
        "machine_end_gcode" : {
            "default_value": "G92 E0   ;set Extruder to zero\nG1 E-6   ;Retract 6mm\nG92 Z0   ;set Belt to zero\nG1 Z15   ;move Belt 10mm before starting up the next product\nG92 Z0   ;set Belt to zero again\n\n˄˄˄˄˄˄˄˄˄˄˄˄˄˄˄˄ - copy up to here / paste codes just above here- ˄˄˄˄˄˄˄˄˄˄˄˄˄˄˄˄\nM104 S0  ;extruder heater off\nM140 S0  ;heated bed heater off\nG92 Z0\nG1 Z10 F1000\nG28 X0 F2000\nG1 Z20 F1000\nG1 X170 F2000\nG1 Y 1 F2000\nM18      ; Disable all stepper motors"
        },
        "machine_width": {
            "default_value": 340
        },
        "machine_height": {
            "default_value": 340,
            "value": "485 * math.sin(math.radians(float(blackbelt_gantry_angle)))"
        },
        "machine_depth": {
            "default_value": 99999
        },
        "material_diameter": {
            "value": "1.75"
        },
        "machine_gcode_flavor": {
            "default_value": "RepRap (Marlin/Sprinter)"
        },
        "machine_heated_bed": {
            "default_value": true
        },

        "support_enable": {
            "enabled": false
        },
        "support_angle": {
            "value": 90
        },
        "adhesion_type": {
            "enabled": false,
            "value": "'none'"
        },
        "z_offset_layer_0": {
            "enabled": false
        },
        "print_sequence": {
            "enabled": false
        },
        "top_bottom_pattern_0": {
            "enabled": false
        },
        "infill_pattern":
        {
            "options":
            {
                "grid": "Grid",
                "lines": "Lines",
                "triangles": "Triangles",
                "cubic": "Cubic",
                "cubicsubdiv": "Cubic Subdivision",
                "tetrahedral": "Octet",
                "quarter_cubic": "Quarter Cubic",
                "zigzag": "Zig Zag",
                "cross": "Cross",
                "cross_3d": "Cross 3D"
            },
            "value": "'lines'"
        },
        "infill_angles":
        {
            "value": "'[' + str(round(45 * math.sin(math.radians(float(blackbelt_gantry_angle))))) + ',-' + str(round(45 * math.sin(math.radians(float(blackbelt_gantry_angle))))) + ']' if infill_pattern == 'lines' else '[ ]'"
        },
        "gradual_infill_steps":
        {
            "enabled": false
        },
        "switch_extruder_retraction_amount":
        {
            "enabled": false
        },
        "switch_extruder_retraction_speeds":
        {
            "enabled": false
        },
        "mold_enabled":
        {
            "enabled": false
        },
        "magic_fuzzy_skin_enabled":
        {
            "enabled": false
        },
        "wireframe_enabled": {
            "enabled": false
        },

        "layer_height_0": {
            "value": "layer_height + 0.1"
        },
        "line_width": {
            "value": "machine_nozzle_size"
        },
        "wall_line_width": {
            "value": "line_width"
        },
        "wall_line_width_0": {
            "value": "line_width + 0.1"
        },
        "skin_line_width": {
            "value": "line_width + 0.2"
        },
        "skin_preshrink": {
            "value": "2"
        },
        "expand_skins_expand_distance": {
            "value": "0"
        }
    }
}
